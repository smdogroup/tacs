
<!DOCTYPE html>

<html lang="python">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Install &#8212; TACS  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interfaces" href="interfaces.html" />
    <link rel="prev" title="TACS Overview" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="TACS Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">TACS  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Install</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="install">
<h1>Install<a class="headerlink" href="#install" title="Permalink to this heading">¶</a></h1>
<section id="from-anaconda">
<h2>From Anaconda<a class="headerlink" href="#from-anaconda" title="Permalink to this heading">¶</a></h2>
<p>For users, TACS can be easily installed through <a class="reference external" href="https://www.anaconda.com/">Anaconda</a>.
<a class="reference external" href="https://anaconda.org/smdogroup/tacs">Conda packages</a> are available for MacOS and Linux platforms.
To get started, run the following in a conda terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">TACS</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.8</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">TACS</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="o">-</span><span class="n">c</span> <span class="n">smdogroup</span> <span class="n">tacs</span>
</pre></div>
</div>
<p>This will create an environment named &quot;TACS&quot; and install the <cite>tacs</cite> package and all
necessary dependencies. Once installed, the user will have access to all
TACS C++/python libraries, f5tovtk, f5totec, etc through their conda environment.</p>
</section>
<section id="from-source">
<h2>From source<a class="headerlink" href="#from-source" title="Permalink to this heading">¶</a></h2>
<p>For developers, TACS can also be installed from the source code.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h3>
<p>The following packages are required to use TACS:</p>
<ul class="simple">
<li><p>MPI</p></li>
<li><p>BLAS</p></li>
<li><p>LAPACK</p></li>
<li><p>Metis 5.1</p></li>
</ul>
<p>To use the python interface to TACS you will also require:</p>
<ul class="simple">
<li><p>Cython</p></li>
<li><p>mpi4py</p></li>
<li><p>numpy</p></li>
</ul>
<p>Optional packages:</p>
<ul class="simple">
<li><p>SuiteSparse - TACS can use the approximate minimum degree (AMD) ordering routines from SuiteSparse</p></li>
<li><p>TecIO - to convert TACS FH5 output files to tecplot-compatible files</p></li>
</ul>
</section>
<section id="basic-steps-to-compile-tacs">
<h3>Basic steps to compile TACS<a class="headerlink" href="#basic-steps-to-compile-tacs" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Clone the TACS git repository <a class="reference external" href="https://github.com/smdogroup/tacs">tacs</a></p></li>
<li><p>In the base 'tacs' directory, copy the Makefile.in.info to Makefile.in. Edit
the Makefile.in and follow the directions within to set the variables. Set
the following:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TACS_DIR</span></code>: the root director of TACS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CXX</span></code>: the C++ compiler, must be MPI-enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LAPACK_LIBS</span></code>: linking arguments for the LAPACK libraries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">METIS_DIR</span></code>: set the location of METIS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SUITESPARSE_DIR</span></code>: <em>optional</em> set location of SuiteSparse</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TECIO_DIR</span></code>: <em>optional</em> set location of TecIO</p></li>
</ul>
</div></blockquote>
</li>
<li><p>To compile, from the base directory, run <code class="docutils literal notranslate"><span class="pre">make</span></code> then <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">interface</span></code></p></li>
<li><p>To set up the Python interface, run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span> <span class="pre">--user</span></code></p></li>
</ol>
</section>
<section id="detailed-installation-instructions">
<h3>Detailed installation instructions<a class="headerlink" href="#detailed-installation-instructions" title="Permalink to this heading">¶</a></h3>
<p>The Toolbox for the Analysis of Composite Structures (TACS) is a
parallel finite-element code written in C++, with an optional python
interface. TACS has been implemented from the start with gradient-based
optimization in mind. There are built-in routines for evaluating
functions of interest and their derivatives. TACS is object oriented
and can be extended to include new elements, constitutive properties
or functions of interest.</p>
<p>There are several software package dependencies required to install
TACS. The dependencies are divided into the following categories:</p>
<ol class="arabic simple">
<li><p>Dependencies for the C++ interface</p></li>
<li><p>Dependencies for the python interface</p></li>
</ol>
</section>
<section id="checking-out-the-code">
<h3>Checking out the code<a class="headerlink" href="#checking-out-the-code" title="Permalink to this heading">¶</a></h3>
<p>Using git checkout the source</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">smdogroup</span><span class="o">/</span><span class="n">tacs</span>
</pre></div>
</div>
<p>After you have cloned TACS, copy the file <code class="docutils literal notranslate"><span class="pre">Makefile.in.info</span></code> to a file called <code class="docutils literal notranslate"><span class="pre">Makefile.in</span></code>.
When compiling, TACS will look for the paths and settings in <code class="docutils literal notranslate"><span class="pre">Makefile.in</span></code>.
Make sure to set the following:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TACS_DIR</span></code>: the root director of TACS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CXX</span></code>: the C++ compiler, must be MPI-enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LAPACK_LIBS</span></code>: linking arguments for the LAPACK libraries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">METIS_DIR</span></code>: set the location of METIS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SUITESPARSE_DIR</span></code>: <em>optional</em> set location of SuiteSparse</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TECIO_DIR</span></code>: <em>optional</em> set location of TecIO (note you can use either the <code class="docutils literal notranslate"><span class="pre">teciosrc</span></code> or <code class="docutils literal notranslate"><span class="pre">teciompisrc</span></code> implementations)</p></li>
</ol>
<p>In addition, it is recommended to copy the default python settings by copying <code class="docutils literal notranslate"><span class="pre">setup.cfg.info</span></code> to <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>.
The settings in <code class="docutils literal notranslate"><span class="pre">setup.cfg.info</span></code> are intended for development, if you are just going to use the code as-is,
you may wish to modify these settings.</p>
</section>
<section id="install-dependencies">
<h3>Install dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this heading">¶</a></h3>
<p>These instructions direct you to install METIS and other dependencies in the directory <code class="docutils literal notranslate"><span class="pre">tacs/extern</span></code>.
This location for the dependencies is not required, and indeed may not be best.
If you already have these libraries installed, simply adjust the variables in <code class="docutils literal notranslate"><span class="pre">tacs/Makefile.in</span></code> accordingly.</p>
<p>Go to the directory <code class="docutils literal notranslate"><span class="pre">tacs/extern</span></code>. Download <code class="docutils literal notranslate"><span class="pre">metis-5.1.0</span></code> from <a class="reference external" href="http://glaros.dtc.umn.edu/gkhome/metis/metis/download">http://glaros.dtc.umn.edu/gkhome/metis/metis/download</a> and place the file <code class="docutils literal notranslate"><span class="pre">metis-5.1.0.tar.gz</span></code> there.
Note that METIS needs CMake to build and install.</p>
<p>Optionally, you can also place <code class="docutils literal notranslate"><span class="pre">SuiteSparse-5.13.0.tar.gz</span></code> (available from <a class="reference external" href="https://github.com/DrTimothyAldenDavis/SuiteSparse/releases">https://github.com/DrTimothyAldenDavis/SuiteSparse/releases</a>) in the same directory if you want to use the approximate minimum degree ordering routines from SuiteSparse.</p>
<p>Also optionally, place <code class="docutils literal notranslate"><span class="pre">tecio.tgz</span></code> (available from <a class="reference external" href="https://www.tecplot.com/products/tecio-library/">https://www.tecplot.com/products/tecio-library/</a>) in the same directory if you want to build <code class="docutils literal notranslate"><span class="pre">f5totec</span></code>.
Note that TecIO requires the boost library, which can be install with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libboost-dev</span></code> on debian systems.</p>
<p>Then, to build the dependencies, simply run <code class="docutils literal notranslate"><span class="pre">make</span></code>. If the build process ends with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="o">***</span> <span class="n">No</span> <span class="n">rule</span> <span class="n">to</span> <span class="n">make</span> <span class="n">target</span> <span class="s1">&#39;w&#39;</span><span class="o">.</span>  <span class="n">Stop</span><span class="o">.</span>
<span class="n">make</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">Leaving</span> <span class="n">directory</span> <span class="s1">&#39;SomeDirectory/tacs/extern/metis-5.1.0/build/Linux-x86_64&#39;</span>
<span class="n">make</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">***</span> <span class="p">[</span><span class="n">Makefile</span><span class="p">:</span><span class="mi">64</span><span class="p">:</span> <span class="n">install</span><span class="p">]</span> <span class="n">Error</span> <span class="mi">2</span>
<span class="n">make</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">Leaving</span> <span class="n">directory</span> <span class="s1">&#39;SomeDirectory/tacs/extern/metis-5.1.0&#39;</span>
<span class="n">make</span><span class="p">:</span> <span class="o">***</span> <span class="p">[</span><span class="n">Makefile</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span> <span class="n">default</span><span class="p">]</span> <span class="n">Error</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Then try manually running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> within the <code class="docutils literal notranslate"><span class="pre">metis-5.1.0</span></code> directory.</p>
</section>
<section id="make-the-c-tacs-library">
<h3>Make the C++ TACS library<a class="headerlink" href="#make-the-c-tacs-library" title="Permalink to this heading">¶</a></h3>
<p>Return to the root TACS directory.
Ensure that all appropriate variables are set in <code class="docutils literal notranslate"><span class="pre">Makefile.in</span></code>.
Make the TACS libraries by running <code class="docutils literal notranslate"><span class="pre">make</span></code> from the root directory.</p>
</section>
<section id="install-postprocessing-tools">
<h3>Install postprocessing tools<a class="headerlink" href="#install-postprocessing-tools" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">f5tovtk</span></code> and <code class="docutils literal notranslate"><span class="pre">f5totec</span></code> are executables that convert <code class="docutils literal notranslate"><span class="pre">.f5</span></code> files to Paraview <code class="docutils literal notranslate"><span class="pre">.vtk</span></code> and <code class="docutils literal notranslate"><span class="pre">.plt</span></code> formats compatible with Paraview and Tecplot respectively.
After compiling the C++ TACS library, go to the subdirectory <code class="docutils literal notranslate"><span class="pre">tacs/extern/f5tovtk</span></code> and run <code class="docutils literal notranslate"><span class="pre">make</span></code> there.</p>
<p><code class="docutils literal notranslate"><span class="pre">f5totec</span></code> requires Tecplot's <code class="docutils literal notranslate"><span class="pre">tecio</span></code> library, the installation of which is described above.</p>
<p>It is useful to put these utilities on your path if possible.
I add the directory <code class="docutils literal notranslate"><span class="pre">$HOME/bin</span></code> to my <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and then from the directory <code class="docutils literal notranslate"><span class="pre">$HOME/bin</span></code> execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ln -s $HOME/git/tacs/extern/f5tovtk
ln -s $HOME/git/tacs/extern/f5totec
</pre></div>
</div>
</section>
<section id="installing-the-python-interface">
<h3>Installing the python interface<a class="headerlink" href="#installing-the-python-interface" title="Permalink to this heading">¶</a></h3>
<p>The python interface is generated in the <code class="docutils literal notranslate"><span class="pre">tacs/tacs</span></code> sub-directory.
The interface is generated using Cython.</p>
<p>The python interface requires the following packages:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Cython</span></code>: Python interface generator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code>: Numerical python packages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi4py</span></code>: Python interface for MPI</p></li>
</ol>
<p>Use <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install these packages if they are not already installed.
TACS works with python 3.</p>
<p>To build the python interface to <code class="docutils literal notranslate"><span class="pre">tacs</span></code>, and install all dependencies, you can use the Makefile
or you can type the following command in the root directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>\<span class="p">[</span><span class="nb">all</span>\<span class="p">]</span>
</pre></div>
</div>
<p>or alternatively, you can use the shortcut in the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">interface</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the user is using an older version of pip (&lt;21.3) and runs into a missing <code class="docutils literal notranslate"><span class="pre">libtacs.so</span></code> error when importing
tacs in python, they may need to add the following to their pip install command <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.\[all\]</span> <span class="pre">--use-feature=in-tree-build</span></code>.
This option is on by default in newer pip versions and therefore should not be necessary.</p>
</div>
<p>Once this process is complete the python interface install should be complete and tacs should be importable from python.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Install</a><ul>
<li><a class="reference internal" href="#from-anaconda">From Anaconda</a></li>
<li><a class="reference internal" href="#from-source">From source</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#basic-steps-to-compile-tacs">Basic steps to compile TACS</a></li>
<li><a class="reference internal" href="#detailed-installation-instructions">Detailed installation instructions</a></li>
<li><a class="reference internal" href="#checking-out-the-code">Checking out the code</a></li>
<li><a class="reference internal" href="#install-dependencies">Install dependencies</a></li>
<li><a class="reference internal" href="#make-the-c-tacs-library">Make the C++ TACS library</a></li>
<li><a class="reference internal" href="#install-postprocessing-tools">Install postprocessing tools</a></li>
<li><a class="reference internal" href="#installing-the-python-interface">Installing the python interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">TACS Overview</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="interfaces.html"
                          title="next chapter">Interfaces</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="TACS Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">TACS  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Install</a></li> 
      </ul>
    </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>